{% extends 'base.html' %}

{% block titulo %}Actualizar Servicio{% endblock %}

{% block content %}
<h2 class="mb-4 text-center" style="color: #6a9acb;">Actualizar Servicio: {{ servicio.nombre_servicio }}</h2>
<div class="card p-4 shadow-sm mx-auto" style="max-width: 700px;">
    <form method="post">
        {% csrf_token %}
        <div class="mb-3">
            <label for="nombre_servicio" class="form-label">Nombre del Servicio:</label>
            <input type="text" class="form-control" id="nombre_servicio" name="nombre_servicio" value="{{ servicio.nombre_servicio }}" required>
        </div>
        <div class="mb-3">
            <label for="descripcion" class="form-label">Descripción:</label>
            <textarea class="form-control" id="descripcion" name="descripcion" rows="3">{{ servicio.descripcion }}</textarea>
        </div>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="precio" class="form-label">Precio:</label>
                <input type="number" step="0.01" class="form-control" id="precio" name="precio" value="{{ servicio.precio }}" required>
            </div>
            <div class="col-md-6 mb-3">
                <label for="duracion" class="form-label">Duración (minutos):</label>
                <input type="number" class="form-control" id="duracion" name="duracion" value="{{ servicio.duracion }}" required>
            </div>
        </div>
        <div class="mb-3">
            <label for="categoria" class="form-label">Categoría:</label>
            <select class="form-select" id="categoria" name="categoria" required>
                <option value="">Selecciona una categoría</option>
                {% for categoria in categorias %}
                    <option value="{{ categoria.id_categoria }}" {% if categoria.id_categoria == servicio.categoria.id_categoria %}selected{% endif %}>
                        {{ categoria.nombre }}
                    </option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3">
            <label for="empleado_asignado" class="form-label">Empleado Asignado (Opcional):</label>
            <select class="form-select" id="empleado_asignado" name="empleado_asignado">
                <option value="">Ninguno</option>
                {% for empleado in empleados %}
                    <option value="{{ empleado.id_empleado }}" {% if servicio.empleado_asignado and empleado.id_empleado == servicio.empleado_asignado.id_empleado %}selected{% endif %}>
                        {{ empleado.nombre }} {{ empleado.apellido }}
                    </option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3">
            <label for="productos_utilizados" class="form-label">Productos Utilizados (Opcional, texto libre):</label>
            <textarea class="form-control" id="productos_utilizados" name="productos_utilizados" rows="2">{{ servicio.productos_utilizados|default_if_none:'' }}</textarea>
        </div>
        <div class="form-check mb-3">
            <input type="checkbox" class="form-check-input" id="activo" name="activo" {% if servicio.activo %}checked{% endif %}>
            <label class="form-check-label" for="activo">Activo</label>
        </div>
        <div class="d-grid gap-2">
            <button type="submit" class="btn btn-primary">Guardar Cambios</button>
            <a href="{% url 'ver_servicios' %}" class="btn btn-outline-secondary">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}